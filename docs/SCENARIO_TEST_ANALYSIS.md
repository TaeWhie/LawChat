# 시나리오 테스트 결과 분석 및 개선 방안

## 테스트 결과 요약

- **평균 점수**: 60.0/100
- **총 시나리오**: 10개
- **점수 낮은 시나리오**: 시나리오 10 (40점)

## 주요 문제점

### 1. 이슈 분류 오류

| 시나리오 | 예상 이슈 | 실제 분류된 이슈 | 문제 |
|---------|----------|----------------|------|
| 7. 육아휴직 | 육아휴직 | 해고/징계, 직장 내 괴롭힘 | ❌ |
| 8. 산재 신청 | 산재 | 근로자 보호 | ❌ |
| 9. 산업안전 | 산업안전 | 해고/징계 | ❌ |
| 10. 노조 | 노조 | 직장 내 괴롭힘 | ❌ |

**원인**: 상황에서 직접적으로 언급된 키워드(예: "육아휴직", "산재", "노조")를 우선적으로 인식하지 못함

**개선 방안**: 이슈 분류 프롬프트에서 상황의 핵심 키워드를 우선적으로 매칭하도록 강화

### 2. 결론에 법률명 누락

- 대부분의 시나리오에서 `found_laws`가 빈 배열
- 결론에 법률명이 포함되지 않음 (예: "근로기준법 제36조" 대신 "제36조"만 표시)

**원인**: 결론 생성 시 법률명을 명시적으로 추출/포함하지 않음

**개선 방안**: 
- `_rag_context`에서 법률명을 포함하도록 이미 개선했으나, 결론 생성 시 이를 활용하지 못함
- 결론 검증 로직에서 법률명 포함 여부 확인 추가

### 3. 새로운 법률의 조문 검색 실패

| 시나리오 | 누락된 조문 | 누락된 법률 |
|---------|-----------|------------|
| 6. 최저임금 | 제5조 | 최저임금법 |
| 7. 육아휴직 | 제19조 | 남녀고용평등법 |
| 8. 산재 | 제37조 | 산업재해보상보험법 |
| 9. 산업안전 | 제52조 | 산업안전보건법 |
| 10. 노조 | 제81조 | 노동조합법 |

**원인**: 
1. 이슈 분류가 잘못되어 관련 법률을 검색하지 못함
2. 벡터 스토어에 해당 법률이 포함되어 있지 않을 수 있음

**개선 방안**:
1. 이슈 분류 정확도 향상 (위 1번 문제 해결)
2. 벡터 스토어 동기화 확인 및 실행
3. 이슈별 법률 매핑 활용 강화

### 4. 체크리스트 생성 실패

- 시나리오 10에서 체크리스트가 0개 생성됨

**원인**: 이슈 분류가 "직장 내 괴롭힘"으로 잘못되어 노조 관련 조문을 검색하지 못함

**개선 방안**: 이슈 분류 정확도 향상 (위 1번 문제 해결)

## 개선 작업 우선순위

### 즉시 개선 필요 (High Priority)

1. **이슈 분류 프롬프트 강화**
   - 상황에서 직접 언급된 키워드 우선 매칭
   - 예: "육아휴직" 키워드가 있으면 "육아휴직" 이슈로 분류

2. **결론 생성 시 법률명 명시적 포함**
   - `_rag_context`에서 이미 법률명을 포함하도록 개선했으나, 결론 생성 시 이를 활용하도록 프롬프트 강화

3. **벡터 스토어 동기화 확인**
   - 모든 법률이 벡터 스토어에 포함되어 있는지 확인
   - 누락된 법률이 있으면 동기화 실행

### 중기 개선 (Medium Priority)

4. **이슈별 법률 매핑 활용 강화**
   - 이미 `ISSUE_TO_LAW_MAPPING`을 추가했으나, 이슈 분류가 잘못되면 활용 불가
   - 이슈 분류 정확도 향상 후 재검증

5. **체크리스트 생성 품질 개선**
   - 이슈별 필수 확인 사항을 더 구체적으로 질문하도록 프롬프트 개선

## 예상 개선 효과

- 이슈 분류 정확도 향상 → 평균 점수 60점 → 75점 이상
- 결론에 법률명 포함 → 사용자 이해도 향상
- 새로운 법률 조문 검색 성공 → 시나리오 6-10 점수 향상
